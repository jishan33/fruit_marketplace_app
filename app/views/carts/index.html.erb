
<h1>My Cart</h1>


<div class="row justify-content-around">
  <% @cart.cart_products.each do |cart_product| %>
    <% product = cart_product.product %>
 
      <div class="card my-3 col-md-4 col-xs-12" style="max-width:15%; min-width:15rem;">
  
      <%= image_tag product.picture, alt: "#{product.title} image", style: 'width:100%;',class: "card-img-top img_fluid" %>
      <div class="card-body">
        <p class="card-text"><%= product.title %></p> 
        <div class="d-flex justify-content-around">
          <%= number_to_currency(product.price) %>  
          <%= link_to 'Delete', carts_path + "/#{cart_product.id}", method: :delete, class: 'btn btn-outline-secondary btn-sm', data: { confirm: "Really delete #{product.title}?"} %>
        </div>
      </div>
    </div>
  
  <% end %>
</div>

<div class="d-flex justify-content-center mb-3 mt-3">
  <table class="table" style="width: 60%">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Price</th>
      </tr>
    </thead>
    
    <% @cart.cart_products.each do |cart_product| %>
      <tr>
          <td><%= cart_product.product.title %></td>
          <td><%= cart_product.product.price %></td>
      </tr>
    <% end %>
    <tr>
      <td>Total amount:</td>
      <td><%= @cart.cart_products.inject(0) {|sum, cart_product| sum + cart_product.product[:price]}%></td>
    </tr>
      

    
  </table>
</div>

<div class="d-flex justify-content-center">

  <%= link_to "Purchase All Now ðŸ’µ", "", id: "stripe", class: "btn btn-success mr-2" %>  
  <%= link_to "See Products", products_path, class: 'btn btn-primary sm' %>
</div>


<%= javascript_pack_tag "stripe" %>

